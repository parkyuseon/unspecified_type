<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Unspecified Type</title>
  <!-- PWA 기본 -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#ffffff">
  <!-- iOS: 홈화면 전체화면 실행용 -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Unspecified Type">
  <!-- iOS 아이콘 -->
  <link rel="apple-touch-icon" href="icon-192.png">
  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.webmanifest">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <link rel="stylesheet" href="style.css?v=20250915">
</head>
<body>
  <div id="container">
    <div id="output-area"></div>
    <div id="input-area">
        <div id="guide-text">글자 ‘한’을 아래에 써주세요. <br> Write the letter “한” below.</div>
    </div>
    <div id="counter-badge">Total: 0</div>
    <button id="reset-button">Write. 쓰기</button>
    <div id="parameter-box"></div>
    <div id="form-box"></div>
  </div>
  <div id="info-button">i</div>
  <div id="info-modal" class="hidden">
  <div class="info-panel">
    <h3>Unspecified Type</h3>
    <p>쓰기의 움직임을 바탕으로, 실시간 한글 형태를 생성하는 인터랙티브 작업입니다. 속도와 압력, 방향, 시간 등 쓰기의 제스처 데이터는 벡터 글자로 변환됩니다. 불특정 타입은 쓰기의 움직임이 그대로 반영된 고유한 조형입니다.</p>
    <p>수집된 쓰기 데이터와 생성된 이미지는 연구 및 작품 고도화를 위해 서버에 저장될 수 있습니다. 개인을 식별할 수 있는 정보는 저장하지 않습니다.</p>
    <p style="font-size:0.7rem;opacity:.6;">An interactive work that generates new Hangul forms in real time based on the participant’s writing gestures. Data such as speed, pressure, direction, and time are translated into vector-based letters. Unspecified Type represents a unique form that directly reflects the participant’s movement.</p>
    <p style="font-size:0.7rem;opacity:.6;">Collected writing data and generated images may be stored on the server for research and further development. No personally identifiable information is stored.</p>
    <button id="info-close">닫기 Close</button>
  </div>
</div>
  <script src="input.js"></script>
  <script src="output.js"></script>
  <script>
  (function(){
    function exportCanvasPNG(target) {
      const area = document.getElementById(target);
      const canvas = area ? area.querySelector('canvas') : null;
      if (!canvas) return;
      const dataURL = canvas.toDataURL('image/png');
      const a = document.createElement('a');
      const ts = new Date().toISOString().replace(/[:.]/g,'-');
      a.href = dataURL;
      a.download = target + "-" + ts + ".png";
      document.body.appendChild(a);
      a.click();
      a.remove();
    }
    const saveBtn = document.getElementById('save-button');
    if (saveBtn) saveBtn.addEventListener('click', function(){
      exportCanvasPNG('output-area');
      exportCanvasPNG('input-area');
    });
  })();
  </script>
</body>

<script defer src="./save-utils.js"></script>


<script>
  (function lockPageGestures(){
    // 입력 영역에서 모든 터치 제스처 → 기본 동작 차단 (스크롤/당김 금지)
    const ia = document.getElementById('input-area');
    if (ia) {
      ['touchstart','touchmove','touchend','touchcancel'].forEach(evt=>{
        ia.addEventListener(evt, e=> e.preventDefault(), { passive:false });
      });
    }
    // 핀치줌/더블탭 확대 방지
    document.addEventListener('gesturestart', e=> e.preventDefault(), { passive:false });
    document.addEventListener('dblclick',     e=> e.preventDefault(), { passive:false });
  })();
</script>


</html>